<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    html, body { margin: 0; padding: 0; }
    body { display: flex; flex-direction: row; justify-content: center; align-items: center; width: 100vw; height: 100vh; background: rgb(30, 30, 30); }
    img { box-shadow: .17rem .17rem .23rem rgb(16, 16, 16) }
    .fadeInStart { opacity: 0; transition: opacity .43s ease-in-out; }
	  .fadeInEnd { opacity: 1; }
	  .fadeOutStart { opacity: 1; transition: opacity .43s ease-in-out; }
	  .fadeOutEnd { opacity: 0; }
  </style>
  <script>
    function loadImage() {
      const request = new XMLHttpRequest()
      request.addEventListener('loadend',() => {
        const url = JSON.parse(request.response).neko

        const img = new Image()
        img.classList.add('fadeInStart')
        img.addEventListener('load',() => {
          const aspect = img.width / img.height
          if (aspect > window.innerWidth / window.innerHeight && (!window.orientation || window.orientation === 0)) {
            if (img.width > window.innerWidth) img.style.width = '100%'
          } else {
            if (img.height > window.innerHeight) img.style.height = '100%'
          }

          const body = document.body
          while (body.hasChildNodes()) body.removeChild(body.firstChild)
          body.appendChild(img)
          setTimeout(() => img.classList.add('fadeInEnd'), 500)

          setTimeout(() => {
            img.className = ''
            img.classList.add('fadeOutStart')
            setTimeout(() => {
              img.classList.add('fadeOutEnd')
              setTimeout(loadImage, 500)
            }, 500)
          }, 5000)
          console.log({ size: `${img.width}x${img.height}`,  aspect, url })
        })
        img.src = url
        img.addEventListener('click', loadImage)
      })
      request.open('GET', 'https://nekos.life/api/lewd/neko', true)
      request.send()
    }
  </script>
</head>
<body onload="loadImage()"></body>
</html>